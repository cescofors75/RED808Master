# Diagrama de Connexions - ConfiguraciÃ³ Simple
## NomÃ©s amb els components que tens

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                         â”‚
                    â”‚    ESP32-S3 DevKit      â”‚
                    â”‚   + Placa ExpansiÃ³      â”‚
                    â”‚                         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â”‚                     â”‚                     â”‚
   I2S Audio             SPI Display           GPIO Botons
   (3 pins)               (6 pins)              (4 pins)
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚PCM5102A  â”‚          â”‚ ST7789   â”‚          â”‚  Botons  â”‚
  â”‚   DAC    â”‚          â”‚ 240x240  â”‚          â”‚    4x    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â”‚
  [Amplif.]             [Pantalla]                  â”‚
        â”‚               [Stats/Info]                â”‚
        â–¼                                           â”‚
   [Altaveus]              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                      [NavegaciÃ³]
                      UP/DOWN/SELECT/BACK


            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                         â”‚
            â”‚    CONTROL REMOT        â”‚
            â”‚                         â”‚
            â”‚        iPad             â”‚
            â”‚   Via WiFi ğŸ“±           â”‚
            â”‚                         â”‚
            â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â” â”‚
            â”‚  â”‚ 1  â”‚ 2  â”‚ 3  â”‚ 4  â”‚ â”‚
            â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
            â”‚  â”‚ 5  â”‚ 6  â”‚ 7  â”‚ 8  â”‚ â”‚  â† 16 Pads Virtuals
            â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
            â”‚  â”‚ 9  â”‚ 10 â”‚ 11 â”‚ 12 â”‚ â”‚
            â”‚  â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¤ â”‚
            â”‚  â”‚ 13 â”‚ 14 â”‚ 15 â”‚ 16 â”‚ â”‚
            â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜ â”‚
            â”‚                         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Connexions Detallades (Els 3 Components)

### 1ï¸âƒ£ PCM5102A DAC - Audio I2S

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ESP32-S3           PCM5102A            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚                                         â”‚
â”‚  GPIO 42 â”€â”€â”€â”€â”€â”€â”€â”€â†’  BCK                 â”‚
â”‚  GPIO 41 â”€â”€â”€â”€â”€â”€â”€â”€â†’  LRCK (LCK)         â”‚
â”‚  GPIO 2  â”€â”€â”€â”€â”€â”€â”€â”€â†’  DIN                 â”‚
â”‚  3.3V    â”€â”€â”€â”€â”€â”€â”€â”€â†’  VIN                 â”‚
â”‚  GND     â”€â”€â”€â”€â”€â”€â”€â”€â†’  GND                 â”‚
â”‚                                         â”‚
â”‚  Config PCM5102A:                       â”‚
â”‚  SCK  â†’ GND                             â”‚
â”‚  FMT  â†’ GND                             â”‚
â”‚  XMT  â†’ 3.3V (unmute)                   â”‚
â”‚                                         â”‚
â”‚  Output:                                â”‚
â”‚  LOUT â†’ Amplificador Left               â”‚
â”‚  ROUT â†’ Amplificador Right              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Display ST7789 - Pantalla SPI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ESP32-S3           ST7789              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€              â”‚
â”‚                                         â”‚
â”‚  GPIO 10 â”€â”€â”€â”€â”€â”€â”€â”€â†’  CS                  â”‚
â”‚  GPIO 11 â”€â”€â”€â”€â”€â”€â”€â”€â†’  DC                  â”‚
â”‚  GPIO 12 â”€â”€â”€â”€â”€â”€â”€â”€â†’  RST                 â”‚
â”‚  GPIO 13 â”€â”€â”€â”€â”€â”€â”€â”€â†’  SDA (MOSI)         â”‚
â”‚  GPIO 14 â”€â”€â”€â”€â”€â”€â”€â”€â†’  SCL (SCLK)         â”‚
â”‚  3.3V    â”€â”€â”€â”€â”€â”€â”€â”€â†’  VCC                 â”‚
â”‚  3.3V    â”€â”€â”€â”€â”€â”€â”€â”€â†’  BL  (Backlight)    â”‚
â”‚  GND     â”€â”€â”€â”€â”€â”€â”€â”€â†’  GND                 â”‚
â”‚                                         â”‚
â”‚  Nota: BL connectat directament a 3.3V â”‚
â”‚        (no cal pin GPIO)                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Botonera 4 Botons - NavegaciÃ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  Cada botÃ³ connectat igual:             â”‚
â”‚                                         â”‚
â”‚       â”Œâ”€â”€â”€â”€[ BotÃ³ ]â”€â”€â”€â”€â”                â”‚
â”‚  ESP32                 â”‚                â”‚
â”‚  GPIO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                        â”‚                â”‚
â”‚                       GND               â”‚
â”‚                                         â”‚
â”‚  Connexions:                            â”‚
â”‚  GPIO 15 â”€â”€[ UP     ]â”€â”€ GND            â”‚
â”‚  GPIO 16 â”€â”€[ DOWN   ]â”€â”€ GND            â”‚
â”‚  GPIO 17 â”€â”€[ SELECT ]â”€â”€ GND            â”‚
â”‚  GPIO 18 â”€â”€[ BACK   ]â”€â”€ GND            â”‚
â”‚                                         â”‚
â”‚  Pull-up intern activat (3.3V en repos)â”‚
â”‚  BotÃ³ premut = LOW (0V)                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## AlimentaciÃ³

```
        USB 5V (USB-C del ESP32-S3)
             â”‚
             â”œâ”€â†’ ESP32-S3 (regulador intern 3.3V)
             â”‚      â”‚
             â”‚      â”œâ”€â†’ 3.3V â†’ PCM5102A VIN
             â”‚      â”œâ”€â†’ 3.3V â†’ ST7789 VCC
             â”‚      â””â”€â†’ Pull-ups interns botons
             â”‚
             â””â”€â†’ GND (comÃº a tots)
```

**Consum Total:** ~350mA @ 5V
**Font:** Qualsevol USB (mÃ²bil, powerbank, ordinador)

---

## Layout FÃ­sic Recomanat

```
Vista Superior de la Caixa:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚   â”‚  Display     â”‚    [ESP32-S3 PCB]   â”‚
â”‚   â”‚  ST7789      â”‚    + Placa ExpansiÃ³ â”‚
â”‚   â”‚  240x240     â”‚                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                         â”‚
â”‚   Mostra:                               â”‚
â”‚   - Kit actual                          â”‚
â”‚   - CPU load                            â”‚
â”‚   - Grid pads (visual)                  â”‚
â”‚   - IP WiFi                             â”‚
â”‚                                         â”‚
â”‚   [â–²] [â–¼] [âœ“] [âœ—]  â† Botons fÃ­sics     â”‚
â”‚                                         â”‚
â”‚   [PCM5102A] â”€â”€â”€â”€â†’ [Jack Audio 3.5mm]  â”‚
â”‚                                         â”‚
â”‚   [USB-C] â† Power In                    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Resum de Pins Utilitzats

| Component | Pins GPIO | Total |
|-----------|-----------|-------|
| PCM5102A (I2S) | 42, 41, 2 | 3 |
| ST7789 (SPI) | 10-14 | 5 |
| Botons | 15-18 | 4 |
| **TOTAL** | | **12 pins** |

**Backlight**: Connectat directament a 3.3V (no usa GPIO)

**Pins lliures** per futures expansions:
- GPIO 1, 3, 4-9, 19-21, 35-40, 45-48
- Pots afegir: pads fÃ­sics, MIDI, encoders, LEDs

---

## Flux de Dades

```
Input                Processing            Output
â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€

iPad WiFi â”€â”€â”
            â”œâ”€â”€â†’  ESP32-S3  â”€â”€â†’  Audio Engine  â”€â”€â†’  PCM5102A  â”€â”€â†’  ğŸ”Š
Botons â”€â”€â”€â”€â”€â”˜       â”‚               â”‚                    â”‚
                    â”‚               â†“                    â”‚
                    â”‚          PSRAM Samples             â”‚
                    â”‚          (3 Kits 808)              â”‚
                    â†“                                    â”‚
               Display ST7789                            â”‚
               - Kit info                                â”‚
               - Stats                                   â”‚
               - IP address                              â”‚
```

---

## Checklist de Muntatge

```
â˜ 1. Soldar pins ESP32-S3 a placa expansiÃ³
â˜ 2. Connectar Display (6 cables)
â˜ 3. Verificar backlight encÃ©n
â˜ 4. Connectar DAC (3 cables + power)
â˜ 5. Provar Ã udio amb auriculars
â˜ 6. Connectar 4 botons
â˜ 7. Test botons amb multÃ­metre
â˜ 8. Verificar 3.3V i GND comÃº
â˜ 9. Pujar codi i samples
â˜ 10. Connectar iPad i tocar! ğŸ‰
```

---

## Test de Funcionament

### 1. Power On
```
âœ“ Display s'encÃ©n amb backlight
âœ“ Mostra "ESP32-S3 Drum Machine"
âœ“ Carrega kits des de SPIFFS
```

### 2. WiFi
```
âœ“ Connecta a la teva WiFi
âœ“ Mostra IP a la pantalla
âœ“ mDNS: drummachine.local
```

### 3. Botons
```
âœ“ UP/DOWN canvia kits
âœ“ SELECT mostra VU meter
âœ“ BACK torna a pantalla principal
```

### 4. iPad
```
âœ“ Safari â†’ http://drummachine.local
âœ“ Veus 16 pads
âœ“ Toques i sona Ã udio
âœ“ Pots canviar kits
```

---

## Troubleshooting RÃ pid

| Problema | SoluciÃ³ |
|----------|---------|
| Display negre | Verifica 3.3V i pins GPIO 10-15 |
| No Ã udio | Comprova GPIO 42,41,2 i config PCM5102A |
| Botons no responen | Test continuÃ¯tat botÃ³â†’GND |
| No WiFi | Revisa SSID/password, mira Serial Monitor |
| iPad no carrega web | Ping IP, prova http://[IP] directe |

---

**SIMPLE I EFECTIU**: NomÃ©s 13 pins, 3 components, control total! ğŸš€
